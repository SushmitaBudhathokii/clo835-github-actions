{"filter":false,"title":"main.tf","tooltip":"/terraform/main.tf","ace":{"folds":[],"scrolltop":1186.2000000000003,"scrollleft":0,"selection":{"start":{"row":93,"column":10},"end":{"row":93,"column":10},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":73,"state":"start","mode":"ace/mode/terraform"}},"hash":"268b07339365a6e5bb082cea47a856096de52a5b","undoManager":{"mark":15,"position":15,"stack":[[{"start":{"row":0,"column":0},"end":{"row":85,"column":1},"action":"insert","lines":["terraform {","  required_providers {","    aws = {","      source  = \"hashicorp/aws\"","      version = \"~> 5.0\"","    }","  }","}","","provider \"aws\" {","  region = var.aws_region","}","","data \"aws_vpc\" \"default\" {","  default = true","}","","resource \"aws_security_group\" \"ec2_sg\" {","  name        = \"clo835-assignment1-sg\"","  description = \"Security group for CLO835 Assignment 1 EC2\"","  vpc_id      = data.aws_vpc.default.id","","  ingress {","    description = \"SSH\"","    from_port   = 22","    to_port     = 22","    protocol    = \"tcp\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","","  ingress {","    description = \"App Ports\"","    from_port   = 8081","    to_port     = 8083","    protocol    = \"tcp\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","","  egress {","    description = \"All outbound\"","    from_port   = 0","    to_port     = 0","    protocol    = \"-1\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","}","","resource \"aws_ecr_repository\" \"webapp\" {","  name = \"clo835-webapp\"","  force_delete = true","}","","resource \"aws_ecr_repository\" \"mysql\" {","  name = \"clo835-mysql\"","  force_delete = true","}","","data \"aws_ami\" \"amazon_linux\" {","  most_recent = true","  owners      = [\"amazon\"]","","  filter {","    name   = \"name\"","    values = [\"al2023-ami-*-x86_64\"]","  }","}","","resource \"aws_instance\" \"web_server\" {","  ami                         = data.aws_ami.amazon_linux.id","  instance_type               = var.instance_type","  key_name                    = var.key_name","  associate_public_ip_address = true","  vpc_security_group_ids      = [aws_security_group.ec2_sg.id]","  subnet_id                   = data.aws_subnet.default.id","","  user_data = filebase64(\"${path.module}/user_data.sh\")","","  tags = {","    Name = \"clo835-web-server\"","  }","}","","data \"aws_subnet\" \"default\" {","  default_for_az = true","  availability_zone = \"us-east-1a\"","}"],"id":1}],[{"start":{"row":17,"column":36},"end":{"row":17,"column":37},"action":"remove","lines":["g"],"id":2},{"start":{"row":17,"column":35},"end":{"row":17,"column":36},"action":"remove","lines":["s"]}],[{"start":{"row":17,"column":35},"end":{"row":17,"column":36},"action":"insert","lines":["c"],"id":3},{"start":{"row":17,"column":36},"end":{"row":17,"column":37},"action":"insert","lines":["l"]},{"start":{"row":17,"column":37},"end":{"row":17,"column":38},"action":"insert","lines":["o"]}],[{"start":{"row":17,"column":38},"end":{"row":17,"column":39},"action":"insert","lines":["8"],"id":4},{"start":{"row":17,"column":39},"end":{"row":17,"column":40},"action":"insert","lines":["3"]},{"start":{"row":17,"column":40},"end":{"row":17,"column":41},"action":"insert","lines":["5"]},{"start":{"row":17,"column":41},"end":{"row":17,"column":42},"action":"insert","lines":["_"]},{"start":{"row":17,"column":42},"end":{"row":17,"column":43},"action":"insert","lines":["s"]},{"start":{"row":17,"column":43},"end":{"row":17,"column":44},"action":"insert","lines":["g"]}],[{"start":{"row":18,"column":24},"end":{"row":18,"column":35},"action":"remove","lines":["assignment1"],"id":6},{"start":{"row":18,"column":24},"end":{"row":18,"column":25},"action":"insert","lines":["s"]},{"start":{"row":18,"column":25},"end":{"row":18,"column":26},"action":"insert","lines":["u"]},{"start":{"row":18,"column":26},"end":{"row":18,"column":27},"action":"insert","lines":["s"]},{"start":{"row":18,"column":27},"end":{"row":18,"column":28},"action":"insert","lines":["h"]},{"start":{"row":18,"column":28},"end":{"row":18,"column":29},"action":"insert","lines":["m"]},{"start":{"row":18,"column":29},"end":{"row":18,"column":30},"action":"insert","lines":["i"]},{"start":{"row":18,"column":30},"end":{"row":18,"column":31},"action":"insert","lines":["t"]},{"start":{"row":18,"column":31},"end":{"row":18,"column":32},"action":"insert","lines":["a"]}],[{"start":{"row":19,"column":32},"end":{"row":19,"column":55},"action":"remove","lines":["for CLO835 Assignment 1"],"id":7},{"start":{"row":19,"column":31},"end":{"row":19,"column":32},"action":"remove","lines":[" "]}],[{"start":{"row":17,"column":35},"end":{"row":17,"column":42},"action":"remove","lines":["clo835_"],"id":8}],[{"start":{"row":48,"column":17},"end":{"row":48,"column":18},"action":"insert","lines":["s"],"id":9},{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"insert","lines":["u"]},{"start":{"row":48,"column":19},"end":{"row":48,"column":20},"action":"insert","lines":["s"]},{"start":{"row":48,"column":20},"end":{"row":48,"column":21},"action":"insert","lines":["h"]},{"start":{"row":48,"column":21},"end":{"row":48,"column":22},"action":"insert","lines":["m"]},{"start":{"row":48,"column":22},"end":{"row":48,"column":23},"action":"insert","lines":["i"]},{"start":{"row":48,"column":23},"end":{"row":48,"column":24},"action":"insert","lines":["t"]},{"start":{"row":48,"column":24},"end":{"row":48,"column":25},"action":"insert","lines":["a"]},{"start":{"row":48,"column":25},"end":{"row":48,"column":26},"action":"insert","lines":["-"]}],[{"start":{"row":53,"column":17},"end":{"row":53,"column":18},"action":"insert","lines":["s"],"id":10},{"start":{"row":53,"column":18},"end":{"row":53,"column":19},"action":"insert","lines":["u"]},{"start":{"row":53,"column":19},"end":{"row":53,"column":20},"action":"insert","lines":["s"]},{"start":{"row":53,"column":20},"end":{"row":53,"column":21},"action":"insert","lines":["h"]},{"start":{"row":53,"column":21},"end":{"row":53,"column":22},"action":"insert","lines":["m"]},{"start":{"row":53,"column":22},"end":{"row":53,"column":23},"action":"insert","lines":["i"]},{"start":{"row":53,"column":23},"end":{"row":53,"column":24},"action":"insert","lines":["t"]},{"start":{"row":53,"column":24},"end":{"row":53,"column":25},"action":"insert","lines":["y"]},{"start":{"row":53,"column":25},"end":{"row":53,"column":26},"action":"insert","lines":["a"]}],[{"start":{"row":53,"column":25},"end":{"row":53,"column":26},"action":"remove","lines":["a"],"id":11},{"start":{"row":53,"column":24},"end":{"row":53,"column":25},"action":"remove","lines":["y"]}],[{"start":{"row":53,"column":24},"end":{"row":53,"column":25},"action":"insert","lines":["a"],"id":12},{"start":{"row":53,"column":25},"end":{"row":53,"column":26},"action":"insert","lines":["-"]}],[{"start":{"row":48,"column":25},"end":{"row":48,"column":26},"action":"insert","lines":["1"],"id":13}],[{"start":{"row":48,"column":25},"end":{"row":48,"column":26},"action":"remove","lines":["1"],"id":14}],[{"start":{"row":48,"column":25},"end":{"row":48,"column":26},"action":"insert","lines":["7"],"id":15}],[{"start":{"row":53,"column":25},"end":{"row":53,"column":26},"action":"insert","lines":["7"],"id":16}],[{"start":{"row":0,"column":0},"end":{"row":85,"column":1},"action":"remove","lines":["terraform {","  required_providers {","    aws = {","      source  = \"hashicorp/aws\"","      version = \"~> 5.0\"","    }","  }","}","","provider \"aws\" {","  region = var.aws_region","}","","data \"aws_vpc\" \"default\" {","  default = true","}","","resource \"aws_security_group\" \"ec2_sg\" {","  name        = \"clo835-sushmita-sg\"","  description = \"Security group EC2\"","  vpc_id      = data.aws_vpc.default.id","","  ingress {","    description = \"SSH\"","    from_port   = 22","    to_port     = 22","    protocol    = \"tcp\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","","  ingress {","    description = \"App Ports\"","    from_port   = 8081","    to_port     = 8083","    protocol    = \"tcp\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","","  egress {","    description = \"All outbound\"","    from_port   = 0","    to_port     = 0","    protocol    = \"-1\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","}","","resource \"aws_ecr_repository\" \"webapp\" {","  name = \"clo835-sushmita7-webapp\"","  force_delete = true","}","","resource \"aws_ecr_repository\" \"mysql\" {","  name = \"clo835-sushmita7-mysql\"","  force_delete = true","}","","data \"aws_ami\" \"amazon_linux\" {","  most_recent = true","  owners      = [\"amazon\"]","","  filter {","    name   = \"name\"","    values = [\"al2023-ami-*-x86_64\"]","  }","}","","resource \"aws_instance\" \"web_server\" {","  ami                         = data.aws_ami.amazon_linux.id","  instance_type               = var.instance_type","  key_name                    = var.key_name","  associate_public_ip_address = true","  vpc_security_group_ids      = [aws_security_group.ec2_sg.id]","  subnet_id                   = data.aws_subnet.default.id","","  user_data = filebase64(\"${path.module}/user_data.sh\")","","  tags = {","    Name = \"clo835-web-server\"","  }","}","","data \"aws_subnet\" \"default\" {","  default_for_az = true","  availability_zone = \"us-east-1a\"","}"],"id":27},{"start":{"row":0,"column":0},"end":{"row":113,"column":0},"action":"insert","lines":["terraform {","  required_providers {","    aws = {","      source  = \"hashicorp/aws\"","      version = \"~> 5.0\"","    }","  }","}","","provider \"aws\" {","  region = var.aws_region","}","","data \"aws_vpc\" \"default\" {","  default = true","}","","data \"aws_subnet\" \"default\" {","  default_for_az     = true","  availability_zone  = \"us-east-1a\"","}","","# Lookup the IGW already attached to the default VPC","data \"aws_internet_gateway\" \"default\" {","  filter {","    name   = \"attachment.vpc-id\"","    values = [data.aws_vpc.default.id]","  }","}","","resource \"aws_security_group\" \"ec2_sg\" {","  name        = \"clo835-sushmita-sg\"","  description = \"Security group EC2\"","  vpc_id      = data.aws_vpc.default.id","","  ingress {","    description = \"SSH\"","    from_port   = 22","    to_port     = 22","    protocol    = \"tcp\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","","  ingress {","    description = \"App Ports\"","    from_port   = 8081","    to_port     = 8083","    protocol    = \"tcp\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","","  egress {","    description = \"All outbound\"","    from_port   = 0","    to_port     = 0","    protocol    = \"-1\"","    cidr_blocks = [\"0.0.0.0/0\"]","  }","}","","# Ensure route table for internet access is correctly associated with subnet","resource \"aws_route_table\" \"public_rt\" {","  vpc_id = data.aws_vpc.default.id","","  route {","    cidr_block = \"0.0.0.0/0\"","    gateway_id = data.aws_internet_gateway.default.id","  }","","  tags = {","    Name = \"clo835-public-rt\"","  }","}","","resource \"aws_route_table_association\" \"public_assoc\" {","  subnet_id      = data.aws_subnet.default.id","  route_table_id = aws_route_table.public_rt.id","}","","resource \"aws_ecr_repository\" \"webapp\" {","  name          = \"clo835-sushmita7-webapp\"","  force_delete  = true","}","","resource \"aws_ecr_repository\" \"mysql\" {","  name          = \"clo835-sushmita7-mysql\"","  force_delete  = true","}","","data \"aws_ami\" \"amazon_linux\" {","  most_recent = true","  owners      = [\"amazon\"]","","  filter {","    name   = \"name\"","    values = [\"al2023-ami-*-x86_64\"]","  }","}","","resource \"aws_instance\" \"web_server\" {","  ami                         = data.aws_ami.amazon_linux.id","  instance_type               = var.instance_type","  key_name                    = var.key_name","  associate_public_ip_address = true","  vpc_security_group_ids      = [aws_security_group.ec2_sg.id]","  subnet_id                   = data.aws_subnet.default.id","","  user_data = filebase64(\"${path.module}/user_data.sh\")","","  tags = {","    Name = \"clo835-web-server\"","  }","}",""]}]]},"timestamp":1749875914000}